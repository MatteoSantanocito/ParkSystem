<?xml version="1.0" encoding="UTF-8"?>
<ContentPage 
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    x:Class="ParkSystemApp.Profilo"
    Title="Profilo"
    BackgroundColor="White">

    <!-- Layout principale: una Grid con due righe, una per la top bar e l'altra per il contenuto scorrevole -->
    <Grid RowDefinitions="Auto,*">

        <!-- Top Bar -->
        <Grid BackgroundColor="#F4A7A3" Padding="10" HeightRequest="60" Grid.Row="0">
            <Grid.ColumnDefinitions>
                <!-- La prima colonna avrà dimensione automatica per l'icona -->
                <ColumnDefinition Width="Auto"/>
                <!-- La seconda colonna occuperà il resto dello spazio -->
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- Bottone Logout nella prima colonna -->
            <ImageButton 
                Source="logout.png" 
                Clicked="OnLogoutClicked"
                HorizontalOptions="Start"
                VerticalOptions="Center"
                Aspect="AspectFit"
                Grid.Column="0"/>

            <!-- Label Benvenuto, Nome nella seconda colonna, allineata a destra -->
            <Label 
                x:Name="WelcomeLabel"
                Text="Benvenuto, " 
                HorizontalOptions="End"
                VerticalOptions="Center"
                FontSize="16"
                FontAttributes="Bold"
                Grid.Column="1"/>
        </Grid>

        <!-- Contenuto scorrevole -->
        <ScrollView Grid.Row="1">
            <VerticalStackLayout Margin="20" Spacing="20">

                <!-- Sezione Informazioni Account -->
                <Frame BorderColor="#F4A7A3" CornerRadius="5" Padding="10">
                    <VerticalStackLayout Spacing="10">
                        <Label Text="Informazioni account"
                               FontSize="14"
                               FontAttributes="Bold" />

                        <!-- Layout flessibile per Email + freccia -->
                        <Grid ColumnSpacing="10">
                            <Grid.ColumnDefinitions>
                                <!-- La prima colonna occupa il doppio della larghezza della seconda -->
                                <ColumnDefinition Width="2*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <!-- Dati email -->
                            <VerticalStackLayout Grid.Column="0">
                                
                                <Label Text="Email" FontSize="12" />
                                <Label x:Name="EmailLabel" FontSize="14" />
                            </VerticalStackLayout>

                            <!-- Bottone freccia per cambio email -->
                            <ImageButton 
                                Grid.Column="1"
                                Source="arrow.png"
                                Clicked="OnChangeEmailClicked"
                                HorizontalOptions="FillAndExpand"
                                VerticalOptions="Center"
                                Aspect="AspectFit"
                                WidthRequest="10"/>
                        </Grid>

                        <!-- Layout flessibile per Password + freccia -->
                        <Grid ColumnSpacing="10">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="2*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <!-- Dati password (mascherata) -->
                            <VerticalStackLayout Grid.Column="0">
                                <Label Text="Password" FontSize="12" />
                                <Label Text="**********" FontSize="14" />
                            </VerticalStackLayout>

                            <!-- Bottone freccia per cambio password -->
                            <ImageButton 
                                Grid.Column="1"
                                Source="arrow.png"
                                Clicked="OnChangePasswordClicked"
                                HorizontalOptions="FillAndExpand"
                                VerticalOptions="Center"
                                Aspect="AspectFit"/>
                        </Grid>
                    </VerticalStackLayout>
                </Frame>

                <!-- Sezione Informazioni Personali -->
                <Frame BorderColor="#F4A7A3" CornerRadius="5" Padding="10">
                    <VerticalStackLayout Spacing="10">
                        <Label Text="Informazioni personali"
                               FontSize="14"
                               FontAttributes="Bold" />
                        <Label Text="Nome" FontSize="12" />
                        <Label x:Name="NomeValLabel" FontSize="14" />
                        <Label Text="Cognome" FontSize="12" />
                        <Label x:Name="CognomeValLabel" FontSize="14" />
                        <Label Text="Tipo di avventura" FontSize="12" />
                        <Label x:Name="TipoAvvLabel" FontSize="14" />
                    </VerticalStackLayout>
                </Frame>

                <!-- Pulsante per Elimina Account -->
                <Button Text="Elimina Account"
                        TextColor="White"
                        BackgroundColor="Red"
                        Clicked="OnEliminaAccountClicked"/>
            </VerticalStackLayout>
        </ScrollView>
    </Grid>
</ContentPage>
